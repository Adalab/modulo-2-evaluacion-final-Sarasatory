"use strict";const inputSearch=document.querySelector(".js_input_search"),btnSearch=document.querySelector(".js_btn_search"),btnReset=document.querySelector(".js_btn_reset"),listSearchCKT=document.querySelector(".js_list_search_CKT"),listFavoritesCKT=document.querySelector(".js_list_favorites_CKT"),listDrinkedCKT=document.querySelector(".js_list_drinked_CKT"),counterFav=document.querySelector(".js_counter_fav"),counterDri=document.querySelector(".js_counter_dri"),bodyJs=document.querySelector(".js_body"),searchURL="https://www.thecocktaildb.com/api/json/v1/1/search.php?s=",nonAlcoholicURL="https://www.thecocktaildb.com/api/json/v1/1/filter.php?a=Non_Alcoholic",margaritaURL="https://www.thecocktaildb.com/api/json/v1/1/search.php?s=margarita",mojitoURL="https://www.thecocktaildb.com/api/json/v1/1/search.php?s=mojito",ginURL="https://www.thecocktaildb.com/api/json/v1/1/search.php?s=gin",randonURL="https://www.thecocktaildb.com/api/json/v1/1/random.php";let callApiUrl="",cocktails=[],cocktailsFavorites=[],cocktailsDrinked=[],randonIni=6,swt=0,countCktFav=0,countCktDri=0;function setLocalStorage(){console.log("Entra en setLocalStorage");const n=JSON.stringify(cocktailsFavorites),e=JSON.stringify(cocktailsDrinked);localStorage.setItem("localFavoritesList",n),localStorage.setItem("localDrinkedList",e)}function getLocalStorage(){console.log("Entra en gelLocalStorage");let n=localStorage.getItem("localFavoritesList"),e=localStorage.getItem("localDrinkedList");if("[null]"===n||n===[null]||"null"===n||null===n||n===[]||"[]"===n)n=[];else{const e=JSON.parse(n);cocktailsFavorites=e,paintFun(cocktailsFavorites,1)}if("[null]"===e||e===[null]||"null"===e||null===e||e===[]||"[]"===e)e=[];else{const n=JSON.parse(e);cocktailsDrinked=n,paintFun(cocktailsDrinked,2)}}function addRemoveFavorites(n){console.log("Entra en addRemoveFavorites");const e=n.currentTarget.id,t=cocktails.find(n=>n.idDrink===e),o=cocktailsFavorites.findIndex(n=>n.idDrink===e);-1===o?cocktailsFavorites.push(t):cocktailsFavorites.splice(o,1),setLocalStorage(),paintFun(cocktails,0),paintFun(cocktailsFavorites,1),paintFun(cocktailsDrinked,2)}function addRemoveDrinked(n){console.log("Entra en addRemoveDrinked");const e=n.currentTarget.id,t=cocktails.find(n=>n.idDrink===e),o=cocktailsDrinked.findIndex(n=>n.idDrink===e);-1===o?cocktailsDrinked.push(t):cocktailsDrinked.splice(o,1),setLocalStorage(),paintFun(cocktails,0),paintFun(cocktailsFavorites,1),paintFun(cocktailsDrinked,2)}function listenCocktails(){console.log("Entra en listenCocktails");const n=document.querySelectorAll(".js_icon_favorite");for(const e of n)e.addEventListener("click",addRemoveFavorites)}function listenDrinked(){console.log("Entra en listenDrinked");const n=document.querySelectorAll(".js_icon_glass");for(const e of n)e.addEventListener("click",addRemoveDrinked)}function ApiUrlGenerator(n){console.log("Entra en ApiUrlGenerator");const e=n.currentTarget.id;"nonAlc"===e&&(callApiUrl=nonAlcoholicURL),"mar"===e&&(callApiUrl=margaritaURL),"moj"===e&&(callApiUrl=mojitoURL),"gin"===e&&(callApiUrl=ginURL),"ran"===e&&(callApiUrl=randonURL),callApi(callApiUrl)}function listenPredefinedList(){console.log("Entra en listenPredefinedList");const n=document.querySelectorAll(".js_header_link");for(const e of n)e.addEventListener("click",ApiUrlGenerator)}function paintFun(n,e){console.log("Entra en paintFun");let t="";t=0===e||3===e?"seaRan":"favDri";let o="";for(let i=0;i<n.length;i++){const c=n[i],l=cocktailsFavorites.findIndex(e=>e.idDrink===n[i].idDrink),s=cocktailsDrinked.findIndex(e=>e.idDrink===n[i].idDrink);let r="",a="",d="",k="",u="";-1!==l&&(r="favoriteClass"),-1!==s&&(a="drinkedClass"),"Alcoholic"===n[i].strAlcoholic?d="alcoholicClass":"Optional alcohol"===n[i].strAlcoholic?k="maybeAlcoholicClass":u="nonAlcoholicClass",console.log("----\x3e",n[i].strAlcoholic,"<----");const h=n[i].strDrinkThumb;if(""===n[i].strDrinkThumb){}if(o+=`<div class="constructor--${t}__card" id="${n[i].idDrink}">`,o+=`<div class="constructor--${t}__card__img" style="background-image: url(${h})">`,o+=`<div class="constructor--${t}__card__img__iconFav js_icon_favorite ${r}" id="${n[i].idDrink}">`,o+="</div>",o+=`<div class="constructor--${t}__card__img__iconDri js_icon_glass ${a}" id="${n[i].idDrink}">`,o+="</div>",o+="</div>",o+=`<h5 class="constructor--${t}__card__title title--h5">${n[i].strDrink}</h5>`,0===e||3===e){o+=` <p class="constructor--${t}__card__ingredients-text">Ingredientes:</p>`,o+=`<ul class="constructor--${t}__card__ingredients-ul">`;for(let n=1;n<16;n++){const e="strIngredient".concat(n);null!==c[e]&&""!==c[e]&&void 0!==c[e]&&(o+=`<li class="constructor--${t}__card__ingredients-li">${c[e]}</li>`)}o+="</ul>"}o+=`<div class="constructor--${t}__card__cont-label">`,o+=`<p class="constructor--${t}__card__cont-label__label ${d} ${k} ${u}">${n[i].strAlcoholic}</p>`,o+="</div>",o+="</div>"}0===e||3===e?(console.log("Entra en pintar cocktails buscados"),listSearchCKT.innerHTML="",listSearchCKT.innerHTML+=o):1===e?(console.log("Entra en pintar cocktails favorites"),listFavoritesCKT.innerHTML="",listFavoritesCKT.innerHTML+=o):(console.log("Entra en pintar cocktails bebidos"),listDrinkedCKT.innerHTML="",listDrinkedCKT.innerHTML+=o),countCktFav=cocktailsFavorites.length,countCktDri=cocktailsDrinked.length,drunkennessFun(countCktFav,countCktDri),listenCocktails(),listenDrinked()}function callApi(n){console.log("Entra en callApiUrl"),fetch(n).then(n=>n.json()).then(n=>{cocktails=n.drinks,paintFun(cocktails,0)})}function drunkennessFun(n,e){counterFav.innerHTML="Mis favorios ("+n+")",counterDri.innerHTML="";const t=[":)","Voy bien","Sin problema","El puntito","¡¡Otra!!","¡Tía!, ¡¡Te quiero1!","Tranquiihh... ¡Que yo controlo!"],o=["drunkenness1","drunkenness2","drunkenness3","drunkenness4","drunkenness5","drunkenness6","drunkenness7"];for(let n=0;n<t.length;n++)n===e&&(counterDri.innerHTML="Los que he bebido ("+e+") - "+t[n]);for(let n=0;n<o.length;n++)bodyJs.classList.remove("drunkenness"+n),n===e&&bodyJs.classList.add("drunkenness"+n)}function getRandonCocktails(){console.log("Entra en getRandonCocktails");for(let n=0;n<randonIni;n++)fetch(randonURL).then(n=>n.json()).then(n=>{cocktails.push(n.drinks[0]),cocktails.length===randonIni&&(paintFun(cocktails,0),console.log("LANZA PAINFUN ---\x3e "))})}function handleClickSearch(n){console.log("Entra en handleClickSearch"),n.preventDefault();let e="";e=inputSearch.value,callApiUrl=searchURL+e,callApi(callApiUrl)}function handleClickReset(){cocktails=[],cocktailsFavorites=[],cocktailsDrinked=[],setLocalStorage(),paintFun(cocktails,0),paintFun(cocktailsFavorites,1),paintFun(cocktailsDrinked,2),getRandonCocktails()}btnSearch.addEventListener("click",handleClickSearch),btnReset.addEventListener("click",handleClickReset),inputSearch.addEventListener("keyup",handleClickSearch),inputSearch.addEventListener("keypress",n=>{13==n.keyCode&&n.preventDefault()}),getLocalStorage(),getRandonCocktails(),listenPredefinedList();