"use strict";const inputSearch=document.querySelector(".js_input_search"),btnSearch=document.querySelector(".js_btn_search"),btnReset=document.querySelector(".js_btn_reset"),listSearchCKT=document.querySelector(".js_list_search_CKT"),listFavoritesCKT=document.querySelector(".js_list_favorites_CKT"),listDrinkedCKT=document.querySelector(".js_list_drinked_CKT"),counterFav=document.querySelector(".js_counter_fav"),counterDri=document.querySelector(".js_counter_dri"),bodyJs=document.querySelector(".js_body"),searchURL="https://www.thecocktaildb.com/api/json/v1/1/search.php?s=",nonAlcoholicURL="https://www.thecocktaildb.com/api/json/v1/1/filter.php?a=Non_Alcoholic",margaritaURL="https://www.thecocktaildb.com/api/json/v1/1/search.php?s=margarita",mojitoURL="https://www.thecocktaildb.com/api/json/v1/1/search.php?s=mojito",ginURL="https://www.thecocktaildb.com/api/json/v1/1/search.php?s=gin",randonURL="https://www.thecocktaildb.com/api/json/v1/1/random.php";let callApiUrl="",cocktails=[],cocktailsFavorites=[],cocktailsDrinked=[],randonIni=6,swt=0,countCktFav=0,countCktDri=0;function setLocalStorage(){const n=JSON.stringify(cocktailsFavorites),t=JSON.stringify(cocktailsDrinked);localStorage.setItem("localFavoritesList",n),localStorage.setItem("localDrinkedList",t)}function getLocalStorage(){let n=localStorage.getItem("localFavoritesList"),t=localStorage.getItem("localDrinkedList");if("[null]"===n||n===[null]||"null"===n||null===n||n===[]||"[]"===n)n=[];else{const t=JSON.parse(n);cocktailsFavorites=t,paintFun(cocktailsFavorites,1)}if("[null]"===t||t===[null]||"null"===t||null===t||t===[]||"[]"===t)t=[];else{const n=JSON.parse(t);cocktailsDrinked=n,paintFun(cocktailsDrinked,2)}}function addRemoveFavorites(n){const t=n.currentTarget.id,e=cocktails.find(n=>n.idDrink===t),i=cocktailsFavorites.findIndex(n=>n.idDrink===t);-1===i?cocktailsFavorites.push(e):cocktailsFavorites.splice(i,1),setLocalStorage(),paintFun(cocktails,0),paintFun(cocktailsFavorites,1),paintFun(cocktailsDrinked,2)}function addRemoveDrinked(n){const t=n.currentTarget.id,e=cocktails.find(n=>n.idDrink===t),i=cocktailsDrinked.findIndex(n=>n.idDrink===t);-1===i?cocktailsDrinked.push(e):cocktailsDrinked.splice(i,1),setLocalStorage(),paintFun(cocktails,0),paintFun(cocktailsFavorites,1),paintFun(cocktailsDrinked,2)}function listenCocktails(){const n=document.querySelectorAll(".js_icon_favorite");for(const t of n)t.addEventListener("click",addRemoveFavorites)}function listenDrinked(){const n=document.querySelectorAll(".js_icon_glass");for(const t of n)t.addEventListener("click",addRemoveDrinked)}function ApiUrlGenerator(n){const t=n.currentTarget.id;"nonAlc"===t&&(callApiUrl=nonAlcoholicURL),"mar"===t&&(callApiUrl=margaritaURL),"moj"===t&&(callApiUrl=mojitoURL),"gin"===t&&(callApiUrl=ginURL),"ran"===t&&(callApiUrl=randonURL),callApi(callApiUrl)}function listenPredefinedList(){const n=document.querySelectorAll(".js_header_link");for(const t of n)t.addEventListener("click",ApiUrlGenerator)}function paintFun(n,t){let e="";e=0===t||3===t?"seaRan":"favDri";let i="",c="";for(let o=0;o<n.length;o++){const s=n[o],r=cocktailsFavorites.findIndex(t=>t.idDrink===n[o].idDrink),l=cocktailsDrinked.findIndex(t=>t.idDrink===n[o].idDrink);let a="",d="",u="",k="",p="";-1!==r&&(a="favoriteClass"),-1!==l&&(d="drinkedClass"),"Alcoholic"===n[o].strAlcoholic?(u="alcoholicClass",c="Alcoholic"):"Optional alcohol"===n[o].strAlcoholic?k="maybeAlcoholicClass":p="nonAlcoholicClass";const h=n[o].strDrinkThumb;if(""===n[o].strDrinkThumb){}if(i+=`<div class="constructor--${e}__card" id="${n[o].idDrink}">`,i+=`<div class="constructor--${e}__card__img" style="background-image: url(${h})">`,i+=`<div class="constructor--${e}__card__img__iconFav js_icon_favorite ${a}" id="${n[o].idDrink}">`,i+="</div>",i+=`<div class="constructor--${e}__card__img__iconDri js_icon_glass ${d}" id="${n[o].idDrink}">`,i+="</div>",i+="</div>",i+=`<h5 class="constructor--${e}__card__title title--h5">${n[o].strDrink}</h5>`,0===t||3===t){i+=` <p class="constructor--${e}__card__ingredients-text">Ingredientes:</p>`,i+=`<ul class="constructor--${e}__card__ingredients-ul">`;for(let n=1;n<16;n++){const t="strIngredient".concat(n);null!==s[t]&&""!==s[t]&&void 0!==s[t]&&(i+=`<li class="constructor--${e}__card__ingredients-li">${s[t]}</li>`)}i+="</ul>"}i+=`<div class="constructor--${e}__card__cont-label">`,i+=`<p class="constructor--${e}__card__cont-label__label ${u} ${k} ${p}">${n[o].strAlcoholic}</p>`,i+="</div>",i+="</div>"}0===t||3===t?(listSearchCKT.innerHTML="",listSearchCKT.innerHTML+=i):1===t?(listFavoritesCKT.innerHTML="",listFavoritesCKT.innerHTML+=i):(listDrinkedCKT.innerHTML="",listDrinkedCKT.innerHTML+=i),countCktFav=cocktailsFavorites.length,countCktDri=cocktailsDrinked.length,drunkennessFun(countCktFav,countCktDri,c),listenCocktails(),listenDrinked()}function callApi(n){fetch(n).then(n=>n.json()).then(n=>{cocktails=n.drinks,paintFun(cocktails,0)})}function drunkennessFun(n,t,e){counterFav.innerHTML="Mis favoritos ("+n+")",counterDri.innerHTML="";const i=[":)","Voy bien","Sin problema","El puntito","¡¡Otra!!","¡Tía!, ¡¡Te quiero1!","Tranquiihh... ¡Que yo controlo!","¿Ehhh...? ¡XD XD XD!","Z... z... z...","Ale, ya debe ser el día siguiente :)"],c=["drunkenness1","drunkenness2","drunkenness3","drunkenness4","drunkenness5","drunkenness6","drunkenness7","drunkenness8","drunkenness9"];for(let n=0;n<i.length;n++)n===t&&(counterDri.innerHTML="Los que he bebido ("+t+") - "+i[n]);for(let n=0;n<c.length;n++)bodyJs.classList.remove("drunkenness"+n),n===t&&bodyJs.classList.add("drunkenness"+n)}function getRandonCocktails(){for(let n=0;n<randonIni;n++)fetch(randonURL).then(n=>n.json()).then(n=>{cocktails.push(n.drinks[0]),cocktails.length===randonIni&&paintFun(cocktails,0)})}function handleClickSearch(n){n.preventDefault();let t="";t=inputSearch.value,callApiUrl=searchURL+t,""!==t?callApi(callApiUrl):inputSearch.placeholder="Tienes que decirme qué buscar ahora ;)"}function handleClickReset(){cocktails=[],cocktailsFavorites=[],cocktailsDrinked=[],setLocalStorage(),paintFun(cocktails,0),paintFun(cocktailsFavorites,1),paintFun(cocktailsDrinked,2),getRandonCocktails(),listFavoritesCKT.innerHTML='\n   <div class="constructorEmpty">\n      <p class="constructorEmpty__p title--h4">\n        Aún no has añadido níngun cóctel\n      </p>\n      <p class="constructorEmpty__p title--h5">\n        Prueba a pinchar su corazón ;)\n      </p>\n      <div class="constructorEmpty__imgFav"></div>\n    </div>',listDrinkedCKT.innerHTML='\n   <div class="constructorEmpty">\n      <p class="constructorEmpty__p title--h4">\n        Aún no te has bebido níngun cóctel\n      </p>\n      <p class="constructorEmpty__p title--h5">\n        Prueba a pinchar su coctelera ;)\n      </p>\n      <div class="constructorEmpty__imgDri"></div>\n    </div>'}btnSearch.addEventListener("click",handleClickSearch),btnReset.addEventListener("click",handleClickReset),inputSearch.addEventListener("keyup",handleClickSearch),inputSearch.addEventListener("keypress",n=>{13==n.keyCode&&(n.preventDefault(),inputSearch.value="")}),getLocalStorage(),getRandonCocktails(),listenPredefinedList();